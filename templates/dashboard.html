{% extends "base.html" %}
{% block title %}Dashboard - Retur App{% endblock %}

{% block content %}
<div class="d-flex justify-content-between mb-3">
  <form method="get" class="d-flex">
    <input type="text" class="form-control me-2" name="q" value="{{ q }}" placeholder="Cari nomor retur...">
    <button class="btn btn-outline-success">Cari</button>
  </form>
  <a href="{{ url_for('tambah') }}" class="btn btn-primary">+ Tambah Retur</a>
</div>

<div class="table-responsive">
  <table class="table table-bordered table-striped align-middle">
    <thead class="table-success">
      <tr>
        <th>No</th>
        <th>Nomor Retur</th>
        <th>Nomor Mobil</th>
        <th>Nama Driver</th>
        <th>Bukti</th>
        <th>Tanggal Manual</th>
        <th>Tanggal Input</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      {% for row in data %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ row.nomor_retur }}</td>
        <td>{{ row.nomor_mobil }}</td>
        <td>{{ row.nama_driver }}</td>
        <td>
          {% if row.bukti %}
            <a href="{{ row.bukti }}" target="_blank">ðŸ“· Lihat</a>
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ row.tanggal_manual }}</td>
        <td>{{ row.created_at }}</td>
        <td>
          <form action="{{ url_for('delete', id=row.id) }}" method="post" onsubmit="return confirm('Yakin mau hapus?')">
            <button class="btn btn-sm btn-danger">Hapus</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="8" class="text-center">Belum ada data retur</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
